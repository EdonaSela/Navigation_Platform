<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <style>
      .title { font: 700 30px Arial, sans-serif; fill: #1f2937; }
      .label { font: 600 18px Arial, sans-serif; fill: #111827; }
      .small { font: 500 14px Arial, sans-serif; fill: #374151; }
      .box { fill: #f9fafb; stroke: #374151; stroke-width: 2; rx: 10; }
      .infra { fill: #eef2ff; stroke: #3730a3; stroke-width: 2; rx: 10; }
      .external { fill: #ecfeff; stroke: #0e7490; stroke-width: 2; rx: 10; }
      .arrow { stroke: #111827; stroke-width: 2.5; marker-end: url(#arrowHead); fill: none; }
      .dashed { stroke-dasharray: 8 6; }
    </style>
    <marker id="arrowHead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827"/>
    </marker>
  </defs>

  <text x="40" y="50" class="title">Navigation Platform - Runtime Architecture</text>

  <rect x="40" y="100" width="220" height="110" class="external"/>
  <text x="70" y="145" class="label">Frontend (Angular)</text>
  <text x="70" y="175" class="small">:4200</text>

  <rect x="340" y="80" width="300" height="180" class="box"/>
  <text x="365" y="125" class="label">JourneyService.Api</text>
  <text x="365" y="152" class="small">REST controllers + auth + outbox</text>
  <text x="365" y="178" class="small">/metrics /healthz /readyz</text>
  <text x="365" y="204" class="small">Serilog + OpenTelemetry</text>

  <rect x="730" y="70" width="220" height="110" class="infra"/>
  <text x="760" y="115" class="label">SQL Server</text>
  <text x="760" y="145" class="small">Navigation_Db</text>

  <rect x="730" y="220" width="220" height="120" class="infra"/>
  <text x="760" y="265" class="label">RabbitMQ</text>
  <text x="760" y="292" class="small">exchange: journey.events</text>
  <text x="760" y="317" class="small">queue: reward-worker.*</text>

  <rect x="340" y="320" width="300" height="140" class="box"/>
  <text x="365" y="360" class="label">RewardWorker</text>
  <text x="365" y="388" class="small">Consumes Journey* events</text>
  <text x="365" y="414" class="small">Evaluates daily goal</text>
  <text x="365" y="439" class="small">Updates DB and emits events</text>

  <rect x="980" y="100" width="180" height="110" class="external"/>
  <text x="1015" y="145" class="label">Zipkin</text>
  <text x="1015" y="175" class="small">Trace backend</text>

  <rect x="980" y="250" width="180" height="110" class="external"/>
  <text x="1015" y="295" class="label">Prometheus</text>
  <text x="1015" y="325" class="small">Scrapes /metrics</text>

  <line x1="260" y1="155" x2="340" y2="155" class="arrow"/>
  <text x="270" y="142" class="small">HTTP</text>

  <line x1="640" y1="130" x2="730" y2="125" class="arrow"/>
  <text x="646" y="118" class="small">EF Core</text>

  <line x1="640" y1="215" x2="730" y2="255" class="arrow"/>
  <text x="650" y="235" class="small">Outbox publish</text>

  <line x1="730" y1="290" x2="640" y2="370" class="arrow"/>
  <text x="640" y="315" class="small">Consume events</text>

  <line x1="640" y1="390" x2="730" y2="140" class="arrow dashed"/>
  <text x="645" y="270" class="small">Update projections</text>

  <line x1="640" y1="110" x2="980" y2="150" class="arrow dashed"/>
  <text x="770" y="105" class="small">OTel traces</text>

  <line x1="640" y1="190" x2="980" y2="300" class="arrow dashed"/>
  <text x="775" y="220" class="small">Prometheus metrics</text>
</svg>
